var BreadcrumbView=React.createClass({displayName:"BreadcrumbView",createItem:function(object){return React.createElement("li",null,React.createElement("i",{className:"fa fa-arrow-right"}),React.createElement("a",{"data-fake":!0,href:object.url},object.name))},render:function(){var _self=this,url="",els=this.props.items.map(function(o){return url+="/"+o,_self.createItem({name:o,url:url})}),home=React.createElement("li",null,React.createElement("a",{"data-fake":!0,href:"/"},"Home"));return els.unshift(home),React.createElement("ul",{className:"fbreadcrumb"},els)}}),EXT_MAP={text:{plain:"text",html:"code",css:"code","x-c":"code","default":"text"},audio:{"default":"audio"},video:{"default":"video"},image:{"default":"image"},application:{"default":"",pdf:"pdf",msword:"word","vnd.openxmlformats-officedocument.wordprocessingml.document":"word","vnd.openxmlformats-officedocument.wordprocessingml.template":"word","vnd.ms-excel":"excel","vnd.ms-powerpoint":"powerpoint",javascript:"code",json:"code",zip:"archive","x-7z-compressed":"archive","x-rar-compressed":"archive","x-tar":"archive"}},selected=[],FileView=React.createClass({displayName:"FileView",render:function(){var typeClass,mime=this.props.ext.split("/");if(mime[0]&&mime[1]){var ext=EXT_MAP[mime[0]],cls=ext[mime[1]]||ext["default"];cls&&(cls="-"+cls),typeClass="file-ext fa fa-file"+cls+"-o"}else typeClass="file-ext fa fa-file-o";return React.createElement("li",{className:this.props.disabled?"file disabled":"file",draggable:!0,onDragStart:this.dragStart,onMouseUp:this.mouseUp,ref:"li","data-id":+this.props.id},React.createElement("span",{className:typeClass}),React.createElement("span",null,React.createElement("a",{"data-fake":!0,href:this.props.disabled?"#":this.props.href},this.props.name)),React.createElement("span",{className:"file-type"},mime[0]),React.createElement("span",{className:"file-size"},this.props.size))},mouseUp:function(e){console.log("mouseUp");var li=this.refs.li.getDOMNode();if(e.ctrlKey||e.metaKey){var index=selected.indexOf(this.props.id);index>-1?(selected.splice(index,1),$(li).removeClass("selected")):(selected.push(this.props.id),li.className+=" selected")}else if(e.shiftKey){var last=selected[selected.length-1],lastLi=$('[data-id="'+last+'"]'),lastIndex=lastLi.index(),current=$(li).index(),between=this._owner.props.currentItems.slice(lastIndex,current),els=lastLi.parent().children().slice(lastIndex+1,current+1);console.log(this._owner.props.currentItems);selected=selected.concat(between.map(function(a){return a.id})),els.addClass("selected")}else setTimeout(function(){$(".selected").removeClass("selected"),li.className+=" selected",selected=[this.props.id]}.bind(this),1)}}),FolderView=React.createClass({displayName:"FolderView",render:function(){return React.createElement("li",{className:this.props.disabled?"folder disabled":"folder",draggable:!0,droppable:!0,onDragStart:this.dragStart,onDrop:this.drop,onMouseUp:this.mouseUp,ref:"li","data-id":this.props.id},React.createElement("span",{className:"fa fa-folder-o"}),React.createElement("span",null,React.createElement("a",{"data-fake":!0,href:this.props.disabled?"#":this.props.href},this.props.name)),React.createElement("span",{className:"folder-type"},"Folder"),React.createElement("span",{className:"folder-children"},this.props.children))},drop:function(){$(".selected").removeClass("selected");for(var i=0,len=selected.length;len>i;i++){var target=fileList.filterObject({id:selected[i]})[0];target.parent.set(this.props.id.toString())}selected=[]},mouseUp:function(e){var li=this.refs.li.getDOMNode();if(e.ctrlKey||e.metaKey){var index=selected.indexOf(this.props.id);index>-1?(selected.splice(index,1),$(li).removeClass("selected")):(selected.push(this.props.id),li.className+=" selected")}else setTimeout(function(){$(".selected").removeClass("selected"),li.className+=" selected",selected=[this.props.id]}.bind(this),1)}}),FileList=React.createClass({displayName:"FileList",pathFor:function(item){for(var path="/"+item.name,parent=_.findWhere(this.props.items,{id:item.parent});parent;)path="/"+parent.name+path,parent=_.findWhere(this.props.items,{id:parent.parent});return path},createItems:function(){if(null===this.props.parent)return null;var parent=_.matches({parent:this.props.parent||""}),_self=this,itemsList=_.filter(this.props.items,parent).sort(function(a,b){return(+a.order||0)-(+b.order||0)}),items=itemsList.map(function(item){return"folder"===item.type?React.createElement(FolderView,React.__spread({},item,{href:_self.pathFor(item)})):React.createElement(FileView,React.__spread({},item,{href:_self.pathFor(item)}))});return items&&items.length?(this.props.currentItems=itemsList,items):null},render:function(){return React.createElement("ul",null,React.createElement("li",{className:"folder hidden",ref:"newfolder",id:"newform"},React.createElement("form",{method:"post",action:"/newfolder",ref:"form"},React.createElement("span",{className:"fa fa-folder-o"}),React.createElement("span",null,React.createElement("input",{type:"text",name:"address",type:"hidden"})),React.createElement("span",null,React.createElement("input",{type:"text",name:"name"})),React.createElement("span",{className:"folder-type"},"Folder"),React.createElement("span",null,React.createElement("button",null,"Create")),React.createElement("span",null,React.createElement("button",{type:"button",ref:"cancel"},"Cancel")))),this.createItems()||"No Files Found")},componentDidMount:function(){$form=$(this.refs.form.getDOMNode()),$newfolder=$(this.refs.newfolder.getDOMNode()),$form.submit(function(){$form.find('[name="address"]').val(location.pathname),$newfolder.addClass("hidden"),fileList.push({name:$form.find('[name="name"]').val(),parent:component.props.parent,type:"folder",disabled:!0})}),$(this.refs.cancel.getDOMNode()).click(function(){console.log("a"),$newfolder.addClass("hidden").find('[name="name"]').val("")})}}),TreeView=React.createClass({displayName:"TreeView",createItem:function(object){return React.createElement("li",null,React.createElement("i",null),React.createElement("a",{"data-fake":!0,href:object.url,onDrop:this.drop.bind(this,object),onDragStart:this.dragStart.bind(this,object)},object.name),React.createElement("ul",null,this.createItems(object.children)))},drop:function(object,e){if("folder"===object.type){var id=e.dataTransfer.getData("text/plain"),dragged=fileList.filterObject({id:id})[0];dragged.parent.set(object.id.toString())}},dragStart:function(object,e){e.dataTransfer.setData("text/plain",object.id)},createItems:function(list){var _self=this,els=[];for(var item in list)els.push(_self.createItem(list[item]));return els},render:function(){var els=this.createItems(this.props.items);return React.createElement("ul",null,React.createElement("li",null,React.createElement("i",null),React.createElement("a",{"data-fake":!0,href:"/"},"Home"),React.createElement("ul",null,els)))}});